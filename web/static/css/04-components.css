/* =========================
   Buttons (trim + consistent)
   ========================= */
.btn{
  display:inline-block;
  padding:10px 16px;
  border-radius:var(--radius-sm);
  border:1px solid color-mix(in oklab, var(--accent) 55%, var(--border) 45%);
  background:var(--accent);
  color:#f5f7fa;
  font-weight:650;
  text-decoration:none;
  box-shadow:var(--shadow);
  transition:transform .08s ease, filter .12s ease, box-shadow .12s ease, background-color .12s ease, color .12s ease;
}
.btn:hover{ filter:brightness(0.96); transform:translateY(-1px) }
.btn:active{ transform:translateY(0); box-shadow:var(--shadow-sm) }

.btn--ghost{
  background:transparent;
  color:var(--accent);
  border-color:color-mix(in oklab, var(--accent) 70%, var(--border) 30%);
  box-shadow:none;
}
.btn--ghost:hover{ background:var(--tint-blue); color:var(--text) }

.btn--subtle{
  background:linear-gradient(180deg, color-mix(in oklab, var(--accent) 8%, transparent), transparent);
  color:var(--text);
  border-color:var(--border);
}
.btn--tiny{ padding:6px 10px; font-size:14px; border-radius:var(--radius-xs) }

/* Small badges (single definition) */
.badge{
  display:inline-block;
  padding:.2rem .55rem;
  font-size:.78rem;
  border-radius:999px;
  border:1px solid var(--border);
  background:var(--bg-alt);
  white-space:nowrap;
}

/* =========================
   Generic Cards / Article
   ========================= */
.card,
.article{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius-md);
  box-shadow:var(--shadow);
}
.card{ padding:18px }
.card h3{ margin-top:0; letter-spacing:.15px }
.muted{ color:var(--muted) }

.article{ padding:2rem }
.article h1{ margin-top:0 }
.article pre{
  overflow:auto; background:var(--bg-alt);
  border:1px solid var(--border); border-radius:10px; padding:1rem;
}
.article code{ font-family:var(--mono) }
.post-body code{
  background:var(--tint-blue); padding:.1em .3em; border-radius:6px; border:1px solid var(--border);
}

/* =========================
   Timeline
   ========================= */
.timeline{ counter-reset:step; list-style:none; padding:0; margin:0 }
.timeline li{ position:relative; padding-left:36px; margin:12px 0 }
.timeline li::before{
  counter-increment:step; content:counter(step);
  position:absolute; left:0; top:3px; width:24px; height:24px; border-radius:8px;
  background:linear-gradient(180deg, var(--accent), color-mix(in oklab, var(--accent-600) 60%, var(--accent) 40%));
  color:#f5f7fa; font-weight:700; display:grid; place-items:center;
  box-shadow:0 4px 12px rgba(0,0,0,.25);
}

/* =========================
   Social Rail
   ========================= */
:root { color-scheme: light dark }                   /* prevent icon flash */
html:not(.theme-ready) #theme-toggle .icon { visibility:hidden }

.icon-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:36px; height:36px; border-radius:10px;
  border:1px solid var(--border); background:transparent; color:var(--text);
  cursor:pointer; transition: transform .08s ease, filter .12s ease, box-shadow .12s ease;
}
.icon-btn:hover{ filter:brightness(0.96); transform:translateY(-1px) }
.icon-btn:active{ transform:translateY(0) }

#theme-toggle .icon{ display:none }
html[data-theme="light"] #theme-toggle .sun{ display:block }
html[data-theme="dark"]  #theme-toggle .moon{ display:block }

@media (prefers-reduced-motion:no-preference){
  :root{ --_dur:160ms }
  html.theme-transition *{
    transition: background-color var(--_dur), color var(--_dur), border-color var(--_dur), fill var(--_dur);
  }
}

.social-rail{
  position:fixed; left:max(16px, env(safe-area-inset-left)); top:50%; transform:translateY(-50%);
  z-index:100; color:var(--accent); pointer-events:auto;
}
.social-rail ul{
  list-style:none; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; gap:18px; position:relative;
}
.social-rail ul::before,
.social-rail ul::after{
  content:""; display:block; width:1px; height:90px; background:currentColor; opacity:.85; border-radius:1px;
}
.social-rail ul::before{ margin-bottom:10px }
.social-rail ul::after{ margin-top:10px }
.social-rail a{
  display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; color:inherit; text-decoration:none;
  transition: transform .12s ease, filter .14s ease, opacity .14s ease; opacity:.95;
}
.social-rail svg{ width:24px !important; height:24px !important; stroke-width:1.6; display:block; flex:0 0 auto }
.social-rail a:hover{ transform:translateY(-2px); filter:drop-shadow(0 2px 6px rgba(0,0,0,.25)) }
.social-rail a:focus-visible{ outline:2px solid var(--ring); outline-offset:3px; border-radius:8px }
html[data-theme="light"] .social-rail{ color:color-mix(in oklab, var(--accent) 70%, #c6a96a 30%) }
html[data-theme="dark"]  .social-rail{ color:color-mix(in oklab, var(--accent) 70%, #f6ebc8 30%) }
@media (max-width:840px){ .social-rail{ display:none } }

/* =========================
   Selected Work (Master/Detail)
   ========================= */
/* Section chroming (kept minimal) */
.selected-work{ padding:6rem 0 }
.section-header{ text-align:center; margin-bottom:2.5rem }
.section-header h2{ font-size:2.5rem; font-weight:700; margin:0 0 1rem }
.section-lede{ font-size:1.125rem; color:var(--muted); max-width:60ch; margin:0 auto; line-height:1.6 }

/* --- Base card appearance --- */
#work .project-card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  box-shadow:var(--shadow);
  overflow:hidden;
  transition: box-shadow .15s ease, transform .12s ease, border-color .15s ease;
}
#work .project-card:hover{ transform:translateY(-1px); box-shadow:0 14px 32px rgba(0,0,0,.35) }
#work .project-summary{
  list-style:none; padding:1rem;
  display:flex; align-items:flex-start; justify-content:space-between; gap:.75rem; cursor:pointer;
}
#work .project-summary::-webkit-details-marker{ display:none }
#work .project-title{ margin:0 0 .45rem; font-size:1.05rem; line-height:1.25; word-break:break-word; hyphens:auto }
#work .tech-list{ display:flex; flex-wrap:wrap; gap:.4rem; margin:0; padding:0; list-style:none }
#work .chevron{
  inline-size:1rem; block-size:1rem; background:var(--text);
  mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5"/></svg>') center/contain no-repeat;
  transition:transform .18s ease; margin-top:.25rem;
}
#work .project-card[open] .chevron{ transform:rotate(180deg) }
#work .project-body{ display:none; padding:0 1rem 1rem; border-top:1px dashed var(--border) }
#work .project-card[open] .project-body{ display:block }
#work .project-blurb{ margin:.75rem 0; color:var(--muted); line-height:1.5 }
#work .highlights{ margin:.5rem 0 .5rem 1.25rem }
#work .gallery{ display:grid; grid-template-columns:repeat(auto-fill, minmax(180px,1fr)); gap:.75rem; margin:.5rem 0 }
#work .gallery img{ display:block; width:100%; height:140px; object-fit:cover; border-radius:10px; border:1px solid var(--border) }
#work .actions{ margin-top:.5rem; display:flex; gap:.5rem; flex-wrap:wrap }
#work .actions .is-disabled{ opacity:.6; pointer-events:none }

/* --- CLOSED MODE (no card open): horizontal row --- */
#work .project-stack{
  display:flex; gap:1rem; overflow-x:auto; padding-bottom:.25rem;
  scroll-snap-type:x mandatory;
}
#work .project-stack .project-card{
  flex:0 0 auto; min-width:320px; scroll-snap-align:start;
}

/* --- OPEN MODE (exactly one open): two-column master/detail) ---
   Uses :has() to switch container layout without extra JS classes. */
@supports selector(:has(*)){
  @media (min-width:1024px){
    #work .project-stack:has(.project-card[open]){
      display:grid;
      grid-template-columns: minmax(420px, 1fr) minmax(280px, 420px);
      align-items:start; gap:1.5rem; overflow:visible;
    }
    /* Default all cards to the right column (stack) */
    #work .project-stack:has(.project-card[open]) .project-card{
      grid-column:2; min-width:auto;
    }
    /* The open card becomes the left detail pane */
    #work .project-stack:has(.project-card[open]) .project-card[open]{
      grid-column:1; grid-row:1;
      border-color:color-mix(in oklab, var(--brand), transparent 60%);
      position:sticky; top:.75rem;
    }
  }
}

/* --- Mobile/tablet fallback --- */
@media (max-width:1023.98px){
  /* Keep horizontal rail when closed; when open, fall back to vertical accordion */
  #work .project-stack:has(.project-card[open]){
    display:block; overflow:visible;
  }
  #work .project-stack:has(.project-card[open]) .project-card{
    display:block; min-width:auto;
  }
}


