{{ define "partials/project-cards" }}
<section id="projects" class="selected-work"> {{/* Changed id="work" to id="projects" */}}
  <div class="container">
    <header class="section-header">
      <h2>{{ or .Title "Projects" }}</h2>
      {{- with .Intro }}
        <p class="section-lede">{{ . }}</p>
      {{ end }}
    </header>

    <div class="project-stack" role="list">
      {{- $work := .Projects -}}
      {{- if not $work }}
        <p class="muted">(No projects found. Populate Work.Projects in your config.)</p>
      {{- end }}

      {{- range $proj := $work }}
      <details class="project-card" role="listitem">
        <summary class="project-summary">
          <div>
            <h3 class="project-title">{{ $proj.Title }}</h3>
            {{- with $proj.Tech }}
            <ul class="tech-list">
              {{- range $t := . }}<li><span class="badge">{{ $t }}</span></li>{{ end }}
            </ul>
            {{- end }}
          </div>
          <div class="chevron"></div>
        </summary>
        <div class="project-body">
          {{- with (or $proj.Blurb $proj.Body) }}
            <p class="project-blurb">{{ . }}</p>
          {{ end }}
          {{- with $proj.Highlights }}
            <ul class="highlights">
              {{- range $h := . }}<li>{{ $h }}</li>{{ end }}
            </ul>
          {{- end }}
          {{- with $proj.Images }}
            <div class="gallery">
              {{- range $src := . }}
                <img src="{{ $src }}" alt="image: {{ $proj.Title }} screenshot" loading="lazy" decoding="async">
              {{- end }}
            </div>
          {{- end }}
          {{- with $proj.Links }}
            <div class="actions">
              {{- range $a := . }}
                {{- if $a.Disabled }}
                  <span class="btn btn--tiny is-disabled">{{ $a.Label }}</span>
                {{- else }}
                  <a href="{{ $a.Href }}" class="btn btn--tiny">{{ $a.Label }}</a>
                {{- end }}
              {{- end }}
            </div>
          {{- end }}
        </div>
      </details>
      {{- end }}
    </div>
  </div>
</section>
{{ end }}


